; get list, go through, call function for every element and keep some accumulator
; args: list, function, initial value of accumulator
; return: final value of accumulator

LD 0 0
ATOM
TSEL $ret $next
$next:
    LD 0 0
    CAR ; ghost
    LD 0 2 ; accumulator
    LD 0 1 ; function
    AP 2
    ST 0 2 ; accumulate
    LD 0 0
    CDR
    LD 0 1
    LD 0 2
    LDF @reduce
    BRK
    TAP 3
$ret:
    LD 0 2
    RTN

